### http与会话技术之间的关系？
HTTP
	request
	response
会话
	cookie
	session
客户端和服务器之间是通过Http协议进行通信的。从客户端第一次发送请求开始，到客户端或者服务器断开连接结束，叫做一次会话，而一次会话中包含了非常多组请求响应。对于每一组请求响应，我们说客户端向服务端发送的信息称为请求request，服务端向客户端发送的信息称为response。request和response的格式组成了http协议的主要内容。

对于request的数据，它由请求头，请求行，请求空行，和请求体组成。核心是告诉服务器我即将要访问的你的资源是什么（用于资源定位），此外还包括我的浏览器版本是什么（用于服务器对浏览器的兼容性分析），我点了谁的超链接访问的这个网站（用于流量统计）。request的数据中除了向服务器索取数据外，还可能向服务器提供数据，最经典的就是表单信息通过键值对的情况发送给服务器。也会将所有与这个域名关联的Cookies发送给服务器，用于服务器进行业务逻辑的处理。

对于response的数据，它由响应头，响应行，响应空行，和响应体组成：
- 当客户端浏览器访问的资源是html文件时，核心是将响应体（也就是呈现在页面中的信息）html页面发送出来，还包括编码方式（浏览器用于呈现内容，有一套编码，服务器可能就是另外的编码，那么可能出现乱码，当服务器声明了编码方式，那么浏览器会根据服务器设置的编码方式进行解码，从而避免乱码）。
- 当客户端访问的资源时Servlet文件时，核心时业务逻辑。客户端的访问将会激活对应资源的service方法，通过读取request中的信息来进行业务逻辑的处理，或获取表单信息，或获取cookie信息。

在上面的模型中，存在这样的一些问题：如何在处理一个业务逻辑的时候在服务器内部通过多资源的联合调用？如何在一个会话中实现数据共享？

对于问题一，多资源地处理一个业务逻辑，那么涉及的技术是转发。将已经处理的信息封装到request对象中，再通过资源跳转，将request对象传过去。对方只要读取这个request对象就能进行下一步逻辑处理了。这就是request域。

对于问题二，一个会话中实现数据共享，那么涉及的技术就是会话。由两种会话，一种是Cookie，将数据存储于客户端的会话技术。一种是Session，一种将数据存储在服务器端的的会话技术。

对于第一种Cookie，可以这样理解，浏览器中有一个数组Cookies,里面存储了很多Cookie，对于每个Cookie，存储了三个值（name，value,timeout），当timeout的时间到后，会销毁对应的Cookie。当在接下来的响应请求中，其request的请求都会发送所有存储的Cookies。在服务器端，可以进行读写，以类似数组的形式读取cookie。可以添加Cookie在其response中，如果同名将会覆盖，不同名将会扩充存储。由于cookies对于任意一个服务器进程都能够访问到，所以消息就是共有的。

对于第二种Session，可以这样理解，服务器端有一个空间，这个空间的名字叫做Session，其位置由Jsession和一个数字进行表示，这里就说是Jsession键值对吧。  当客户端发送的request的请求行中中没有Jsession且访问的资源Servlet中有获取Session的操作时，才会真正在内存中开辟Session空间，此时的Servlet可以对Session进行添加属性之类的操作。此外，Tomcat将自动地将Jsession键值对添加到Cookie中，Cookie添加在在response中，最终发送给了客户端。 客户端收到后，自动将含有Jsession的Cookie添加到Cookies列表中，由于此后浏览器每次发送request中都会携带Cookies列表，所以自然也携带了Jsession键值对信息。对于其他的Servlet资源通过解析Cookies中Jsession自然就能查到Session的地址，但是这一步Tomcat已经处理好了，我们只要获取Session就行了。这里会有一个魔鬼细节，当服务器一直开启的情况下，Session中的信息不会抹除，Servlet通过客户端的Request中的Cookies中是否含有Jsession来判断是否要创建新的Session。所以可以将Jsession这个条目的timeout设置得很长，以至于关于服务器再打开，这个条目仍然存在，那么服务器就可以长期使用Session中得数据了。 Session中存储的数据尽管在内存中但是并不会因为数据库的关闭可丢失，因为在关闭服务后，会序列化Session，将其存放在某文件中，且重启服务器后，尽管内存地址变了，但是Jsession的数值没有变化，仍然能够被访问到。 Session的默认失效时间时30分钟。这就有个问题了：Jsession是20分钟，Session是2分钟，那么两分钟后会是什么情况呢？







### 需要掌握的技术的汇总与攻克
#### 问题汇总
##### **在数据库方面**
- 如何使用classload函数，比如进行导入druid.properties
- 保存已经完善的工具类，避免重复地操作
- BeanUtils包地安装与使用
- 如何理解template中地rowmapper的数据类型学会填写

##### 在三大组件上面
- ServletContext是什么东西
#### 问题解决
##### 数据库方面
###### 问题一：直接通过名字转成输入流，所能检索的范围是什么？
**使用案例**
利用类加载器，调用getResourceAsStream方法获取某文件的输入流BufferedInputStream
![[Pasted image 20240418093319.png]]
攻克的问题所在：
直接通过文件名称就能找到的文件范围是，顶级包名下的所有文件，以及与顶级包名同一级的其他文件
![[Pasted image 20240418094139.png]]
简言之：
![[Pasted image 20240418094541.png]]


###### 问题二：保存已经完善的工具类，避免重复地操作
已经将DruidUtil相关的依赖包，配置文件，已经代码放在了"F:\reourceAndUtils"下面


###### 问题三：BeanUtils的使用问题
再web核心知识的request中有详细地介绍。


### maven
#### maven的通识知识
#### 管理的目录结构是相对固定
![[Pasted image 20240608110017.png]]
#### maven的作用
maven的作用有两个，一个是管理项目的依赖jar包，一个是管理项目的生命周期。
对于管理项目的依赖jar包:
- 获取jar包的角度：通过本地仓库，私服仓库和远程仓库来来获取。本地仓库settings.xml中可以自定义设置，私服仓库也可以。
- 存储jar包的角度：没有jar包由三部分东西进行标识,groupId artifactId version,分别对应jar包的作者，名称和版本。在存储这个jar包时候，以本地仓库为根目录，一级一级地进行存储。通过例如 junit maven去网上查，就能查到相关jar包的坐标了。
