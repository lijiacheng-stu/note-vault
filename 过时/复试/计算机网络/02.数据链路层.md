#### 1.功能
- 组帧
- 差错控制
- 可靠传输
- 流量控制
- 介质访问控制
#### 2.组帧：
解决两个问题：
- 帧定界：让接收方能够确认帧的界限
- 透明传输
方案：
- 字符计数法
- 字节填充法
soh,eot,esc。在数据部分如果有这三类前面得加上转义字符esc
- 零比特填充法
`0111 1110` 标记帧开始、帧结尾。发送方每连续5个1就填充一个0。
- 违规编码法
物理层配合，使用中间不跳变得“违规信号”
#### 3.差错控制：
解决得问题：帧内部的“位错”
%% 数据（逻辑）链路：数据链路层需要基于“物理链路”，实现相邻节点之间逻辑上无差错的“数据链路（逻辑链路）” %%
方案：
- 检错编码：奇偶校验码、CRC校验码
- 纠错编码：海明校验码

#### 4.可靠传输和流量控制：
##### 4.1问题：
- 可靠传输解决的问题：发现并解决”帧错“（帧丢失，帧重复，帧失序）
- 流量控制解决的问题：控制发送发发送速率，让接收方”来得及“接收
##### 4.2方案：滑动窗口机制
###### 4.2.1考虑方面：
四个机制：
- 滑动窗口机制
- 确认机制：
	- ACK
	- NAK
- 重传机制
	- 超时重传：超时未收到ACK
	- 请求重传：收到NAK
- 帧编号: 
	- nbit给帧编号
	- twnd+rwnd<=2^n 
可能出现的异常：
- 帧丢失
- 确认帧丢失
- 帧存在比特错误
###### 4.2.2停止等待协议 （twnd=1,rwnd=1）
![[Pasted image 20250318154604.png]]
异常处理：
对发送方来讲，帧丢失、确认帧丢失，帧比特错误将引起超时重传
对接收方来讲，帧丢失感知不到；确认帧丢失将收到重复帧，会识别并丢弃返回ack；帧比特错丢弃该帧。
###### 4.2.3后退N帧协议GBN  (twnd>1,rwnd=1)
![[Pasted image 20250318160734.png]]
异常处理：
对发送方，帧丢失接收方收到异常帧后返回正常接收帧的最后一个，发送方重传丢失帧及其之后的帧。
###### 4.2.4选择重传协议SR (twnd>1,rwnd>1)

解析：
接收方通过”确认机制“控制发送方的窗口向前滑动，从而实现’流量控制”


#### 5.介质访问控制：广播信道才需要实现
##### 5.1 信道划分介质访问控制
- TDM STDM
- WDM FDM
- CDM
##### 5.2随机访问介质访问控制
###### 5.2.1 ALOHA
- 纯aloha：
最大吞吐量为18.4%（即信道利用率的理论上限）。
- 时隙aloha：
最大吞吐量为36.8%
提升：时间被划分为固定长度的时隙，用户只能在时隙的起始时刻发送数据。通过同步发送时间，减少了数据冲突的可能性。
- 反思
发送发和接收方没有监听信道的本领，简单通过是否接收到ack来判断是否接收成功。
###### 5.2.2 CSMA
- 比较优势
发送方具备了监听信道的能力，再监听到信道非空闲时，一定不会发送数据了。再纯aloha协议 中，直接发送。再时隙aloha中，发送时候尽管一定空闲，但是限制了时间点。
- **n-（非）坚持csma** 各字段含义
中当发送发有数据发送时，n表示监听到信道空闲后时候n的概率发送数据。（非）坚持表示监听到信道不空闲的时候，时候继续坚持监听，知道信道空闲。
- 分类
	- 1-坚持csma
	- （1-）非坚持csma
	- p-坚持csma
###### 5.2.3 CSMA/CD
 **适用性** 
 早期的有线以太网用的是集线器，是总线型的结构，适用于CSMA/CD；现在的有线以太网用的是交换机，所以不需要使用CSMA/CD

 **内容** 
口诀：先听后发，边听边发，冲突停发，随机重发
- 发送数据前，监听信道，若空闲则发送数据
- 发送数据期间，监听信道，如果发现冲突，立刻停止发送
- 采用截断二进制指数退避算法确定等待发送的时间，再回到步骤一
注意： 没有ack机制

争用期：
 - 时间长度时两倍最大单向传播时延。
 - 如果发生冲突，对网络中的任何一个节点，在一个争用期内一定能发现，若未发现，则未发生冲突。
 - 在争用期内得一直发送数据，否则，可能存在发生碰撞但是没检测到情况。
以太网中的帧长：最长帧长1518B，最短帧长64B
###### 5.2.4 CSMA/CA
##### 5.3轮询访问介质访问控制
核心特点：环形拓扑结构，各个节点”轮询访问“信道，不会放生冲突。
![[Pasted image 20250318201113.png]]

#### 6.局域网
需要考虑物理层和数据链路层。
物理层考虑传输的介质，拓扑结构，最大段长……

##### 以太网与IEEE802.3

![[Pasted image 20250318205228.png]]
![[Pasted image 20250318205329.png]]

##### 无线局域网IEEE802.11
##### VLAN



