![[Pasted image 20260109141826.png]]

![[Pasted image 20260109170753.png]]
```bash
docker pull --platform linux/amd64 sunkai8304/galloc:latest
docker images
docker run -d -p 8080:8080 --name galloc_container  sunkai8304/galloc:latest
docker ps
http://localhost:8080/GALLOC
```
![[Pasted image 20260109171100.png]]


![[Pasted image 20260109171436.png]]
You have not configured the Nominatim and Google Maps service which are not working by default. You can try with the official Nominatim.

- 研究背景
	- 研究现状
	- 应用领域：
		- 首先，它可用于创建带标注数据集，以训练人工智能模型。
		- 其次，GALLOC 可用于研究特定地理区域内人们使用的典型位置描述。
- 设计理念
- 系统使用
- 性能表现

- 特点：
	- 中心化：
		- 一个人设置项目，准备数据，放在服务器端。其他人不需要再准备。
		- 支持多个客户端程序，同时访问一个服务器端程序，更有效地实现团队合作和分工。
	- 标注的结果质量高：
		- 多个annotators标注同一个message，对于不存在分歧的，质量过关；对于存在分歧的，GALLOC能自动检测分歧并以并列方式可视化分歧，有administrator或creator，这种比较有经验的人在resolve disagreement。
	- 集成度高：
		- 避免了文本编辑器、谷歌地图和谷歌搜索之间切换，几乎一站式满足数据标注的任务。
	- 预标注工具
	- 支持多语言
	- 支持在灾害场景下的位置描述标注方面，仍存在空白，因为这些描述由于其多实体特性（如门牌号地址、道路交叉口和高速公路出口），往往无法与地名录条目关联，并且可能需要标注用户自定义的位置类别以进行地理定位
	- 减少了地名的冲突


我的工作：
- 调研了Nominatim、
- 在本地部署了GALLOC，测试了其功能用例，测试了多用户多客户端情况下的工作流
- 

试验设置：实验组(GALLOC)和对照组(不使用GALLOC)
 - 控制了个体差异
 - 消息内容的设置：
	 - 消息内容不同-->存在消息内容的差异：
		 - 不同的文本消息可能包含不同数量的位置描述
		 - 不同类别的位置描述（如门牌号地址与道路交叉口）可能也需要不同的标注时间，尤其是在识别其空间足迹时。
	 - 消息内容相同 --> 记忆效应 
	 - 消息内容的设置的思想：尽可能避免记忆效应和消息内容差异
	 - 方案：
		 - 相同的数量的消息，所有消息都来自同一场灾难（一定程度上减少内容差异）
		 - 消息不同内容（避免记忆效益，尽可能减少内容差异）：
			 - 确保了两组消息的总数相同、位置描述的数量相同，且位置描述在各类别中的分布相同。

## 非典型的地理位置的的标注
对非典型的地理位置的特点：
- 非典型的地理位置无法通过Web service直接找到，必须人工确认 。
- 非典型的地理位置由典型的地理位置+限定词组成，而典型的地理位置可以被Web service直接找到

标注的基本思想：
- 先通过非典型的地理位置中的典型的地理位置，缩小寻找范围
- 通过调研典型的地理位置的情况，确定限定词的具体位置，通过手工进行标注

### 案例
道路交汇处：
- 标注手段：
	- 找道路1的位置，找道路2的位置 
	- 确定交汇
	- 删除道路1的位置，找道路2的位置 ，对交汇处进行标记
![[Pasted image 20260109183232.png]]
![[Pasted image 20260109183404.png]]

```
{
    "AnnotationID": "amuecvanaxvgqvkqsejknzkkwqftepqr",
    "text": "TRAFFIC ALERT: FM 2770 at Bluff Street is closed. #Harvey #turnarounddontdrown #budatx",
    "Annotation":
    [
        {
            "endIdx": 38,
            "startIdx": 15,
            "spatialFootprint":
            [
                {
                    "geometry":
                    [
                        {
                            "coordinates":
                            [
                                -97.847897,
                                30.078625
                            ],
                            "type": "Point"
                        }
                    ],
                    "type": "Point"
                }
            ],
            "locationDesc": "FM 2770 at Bluff Street",
            "locationCate": "C5: Intersections of roads(or rivers)"
        }
    ],
    "MessageID": "zlhrqboghpnjlimuvjjbozzjwlmwtlkt"
}
```


因为许多描述（如门牌号地址、道路交叉口和高速公路出口）并不存在于典型地名录中


postman对Nominatim/ˌnoʊ.mɪˈneɪ.tɪm/的测试
Nominatim提供了一种互联网服务，它能够通过地理位置的文本描述，如地名等，（通过/search这个端点endpoint）或者是经纬度（通过/reverse这个端点endpoint），来得到一个OSM对象（可以用josn，或者是xml等数据结构表示）。通过对OSM对象的解析，就能知道，它到底属于point、polyline（折线

）、polygon的哪儿一种。
![[Pasted image 20260110000748.png]]
![[Pasted image 20260110000302.png]]




## 关键字的理解
1. 什么位置描述：
	- 简单的例子：
		- (1) 埃菲尔铁塔 (point)
		- (2) 学府路南路 (polyline)
		- (3) 福州大学(polygon)
		- (4)“2799 7th Avenue, Port Arthur, Texas."   (point)--> 门牌号 
		- (5)“ I-45 Exit 47A.” --> 高速公路出口  (point)
		- (6) “I-45 at Main Street”  --> 道路交叉口 (point)
		- (7) “Almeda Genoa Rd. from Windmill Lakes Blvd. to Rowlett Rd.“  -->路段，通过限定条件确定始末 (polyline)
	- 特点：
		- 对(1)(2)(3), 属于,位置实体（或命名实体） --> 能够被Nominatim、Google Maps Geocoding API等服务直接查询到对应的OSM对象，继而获得相应的点、折线或多边形等位置信息。
		- 对(4)~(7), 属于,由多个实体组成的位置描述 --> 由多个位置实体组成，要确定最终的精确位置，需要先分别查找各个位置实体，再根据位置实体的关系，确定最终的精确位置。
			- 下面把此类位置描述叫做`完整位置描述`（complete location description）
2. 什么是灾难相关的文本信息？以哈维飓风的twitter信息为例。
	- `“2799 7th Avenue, Port Arthur, Texas. Please help this family out! They're stuck in their home with children! #HurricaneHarvey”`
	- `“Can someone help? My friend has been stuck at Lyons Ave & Gregg St for hours. #Harvey.”`
3. 什么是灾难相关的文本信息中的位置描述？
	- 在灾难场景下文本信息中,往往包含位置描述，这些位置描述有一定的特点：
		- 用灾难场景来代表了一类位置信息。也是(4)~(7)中呈现的,由多个实体组成的位置描述。
		- 大量的文本中涉及的位置描述，集中在有限的地理范围中。
		- （灾难相关的文本信息中的位置描述 ∈ 有限的地理范围中的完整位置描述）
4. 什么是地理标注？
	- 引入：1～3上面认识什么是位置描述。在灾难场景下，位置描述对应的地图上的精确位置非常重要，它能够指导消防员去哪儿里救援，引导群众应该去哪儿里远离哪儿里等等。如果有一个模型，能够实时地识别大家在网上发出的灾难相关的文本信息中的位置描述，转化成对应的位置就好了，能够为开展下一步行动提供信息基础，有力地挽救生命。要训练这样的模型，就要有数据集，就需要对灾难相关的文本信息进行地理标注。
	- 对一条语句进行地理标注：
		- 包含位置表述的语句--> (包含位置表述的语句,位置描述, 位置类别，地图上的位置)  
		- 注意：
			- 地图上的位置可能是point、polyline、polygon和他们的组合。
			- 地理标注要结合语境
			- 地理标注工具能加速上述的标注过程
	- 生成含有地理标注的数据集：
		- {包含位置表述的语句}--> {(包含位置表述的语句,位置描述, 位置类别，地图上的位置)  }
	

## 文章解决的问题
提出了一个适用于标注完整位置描述的标注器，加速了构建对完整位置描述标注的数据集的速度，为训练相关的模型提供前置条件，为抗灾救难做出了贡献。

## 相关工作
![[Pasted image 20260110210740.png]]
## 系统的使用
1. 系统的部署
文章提供了以下材料：

![[Pasted image 20260110163207.png]]
根据材料，我完成以下的部署：
- 采用B/S架构，客户端是浏览器，仅需配置好服务器端程序
- 服务器端程序支持同时多客户端程序在本地或通过网络访问，是多用户协作协助的架构基础
![[Pasted image 20260110211302.png]]
```bash
docker pull --platform linux/amd64 sunkai8304/galloc:latest
docker images
docker run -d -p 8080:8080 --name galloc_container  sunkai8304/galloc:latest
docker ps
```
![[Pasted image 20260109170753.png]]
2. 系统的启动
现在只关心一下部分：
![[Pasted image 20260110211607.png]]
- 打开服务器端程序：`docker start galloc_container`
- 客户端程序1访问服务器端程序：`http://localhost:8080/GALLOC`
- 客户端程序2访问服务器端程序：`http://192.168.43.193:8080/GALLOC`
- 客户端程序3访问服务器端程序：`http://192.168.43.193:8080/GALLOC`
![[Pasted image 20260110212016.png]]
![[Pasted image 20260110212819.png]]
2. 系统的体验
3.1 创建项目
![[Pasted image 20260110214301.png]]
![[Pasted image 20260110214801.png]]
对Geographic scope：灾难背景，集中在一个区域。作用是避免名称的歧义。
对category schema：对于完全地理描述，很多类别。比如门牌号，高速公路出口，道路交叉口……，更有灵活性
对Annotator number：一个message至少需要多少个标注者标注。保证标注的质量。
![[Pasted image 20260110215436.png]]
文本文件-->json的集合，json至少包含“text”键
![[Pasted image 20260110214141.png]]
![[Pasted image 20260110222359.png]]
![[Pasted image 20260110215804.png]]
3.2 标注
![[Pasted image 20260110221347.png]]
- 标注的任务：
	- 在Message中，标记出对位置描述
	- 人工确定位置描述的类别
	- 确定位置描述的空间足迹（spaatial footprint）
 - 设计哲学1: 标注完全位置描述，而不是分离的命名实体。（DC 1: Annotating complete location descriptions, not separate entities.）
![[Pasted image 20260110221508.png]]
- 不好找位置，因为Nominatim和Google Maps只适合寻找有名实体
- 由于完全地理描述是由有名实体组成，因此些利用Nominatim或Google Maps把实体在地图上找到，在根据关系确定最终的位置。
![[Pasted image 20260110221632.png]]
![[Pasted image 20260110222010.png]]


3.3 消歧、状态查询与多人协作标注
![[Pasted image 20260110222458.png]]
![[Pasted image 20260110223207.png]]
![[Pasted image 20260110223545.png]]
![[Pasted image 20260110223633.png]]
- 两个标注员对同一个信息的标注存在冲突，系统不知道谁是对的，因此需要人工裁决。具有裁决权限的就是creator 或 administrator
![[Pasted image 20260110223821.png]]
![[Pasted image 20260110223856.png]]
![[Pasted image 20260110224013.png]]
![[Pasted image 20260110224231.png]]
![[Pasted image 20260110224309.png]]
![[Pasted image 20260110224336.png]]

4. 工作流程的梳理
- 创建项目的时候：
	- 限定区域
	- 自定义类别
	- 上传符合特定格式的用于标注的数据
	- 确定一条message至少需要的标注人员的数量
- 标注的时候：
	- message找到完全地理描述
	- 选择类别
	- 确定完全地理描述所对应的空间足迹
- 审查的时候：
	- 多个标注员对同一个message产生了不同的标注。可通过点击check status查看数量。
	- creator或administrator可通过点击resolve来裁决。
4. 其他重要细节：
4.1 pre-annotator：作用是识别message中的完全地理描述。也是利用大模型或者其他互联网服务。可以动态配置。
![[Pasted image 20260110225356.png]]
![[Pasted image 20260110225326.png]]
4.2 标注完成后，得到什么东西呢？
![[Pasted image 20260110225503.png]]
![[Pasted image 20260110225814.png]]

5. 性能表现
试验设置：实验组(GALLOC)和对照组(不使用GALLOC)
 - 控制了个体差异
 - 消息内容的设置：
	 - 消息内容不同-->存在消息内容的差异：
		 - 不同的文本消息可能包含不同数量的位置描述
		 - 不同类别的位置描述（如门牌号地址与道路交叉口）可能也需要不同的标注时间，尤其是在识别其空间足迹时。
	 - 消息内容相同 --> 记忆效应 
	 - 消息内容的设置的思想：尽可能避免记忆效应和消息内容差异
	 - 方案：
		 - 相同的数量的消息，所有消息都来自同一场灾难（一定程度上减少内容差异）
		 - 消息不同内容（避免记忆效益，尽可能减少内容差异）：
			 - 确保了两组消息的总数相同、位置描述的数量相同，且位置描述在各类别中的分布相同。
- 时间上
![[Pasted image 20260110230001.png]]
- 准确率上
![[Pasted image 20260110230025.png]]
现象：使用GALLOC的人，因为方便会偏向于把空间足迹标注得更加的具体
![[Pasted image 20260110230139.png]]


5. 总结
5.1 系统的总体架构
![[Pasted image 20260110230351.png]]

5.2 七条设计理念（概括了系统的能力）
- DC 1: Annotating complete location descriptions, not separate entities.
- DC 2: Annotating the categories of location descriptions based on a user-defined scheme.
- DC 3: Providing pre-annotation of location descriptions from text.
- DC 4: Providing automatic identification of spatial footprints for location descriptions
- DC 5: Supporting customized drawing of spatial footprints.
- DC 6: Supporting multi-user collaborative data annotation.
- DC 7: Supporting the annotation of multilingual datasets.
5.3 系统的创新点：
- 支持多用户协作标注
- 支持多语言数据集
- pre-annotation，是解耦的，避免嵌入而出现被淘汰的情况
- 支持完全位置描述的标注，避免传统方法来回切换界面的困扰
5.4 特点：
- 减少了地名的冲突
- 中心化，简化的配置
	- 一个人设置项目，准备数据，放在服务器端。其他人不需要再准备。
	- 支持多个客户端程序，同时访问一个服务器端 程序，更有效地实现团队合作和分工。
- 标注的结果质量高：
	- 多个annotators标注同一个message，对于不存在分歧的，质量过关；对于存在分歧的，GALLOC能自动检测分歧并以并列方式可视化分歧，有administrator或creator，这种比较有经验的人在resolve disagreement。
- 集成度高：
	- 避免了文本编辑器、谷歌地图和谷歌搜索之间切换，几乎一站式满足数据标注的任务。
- 预标注工具
- 支持多语言

5.4 其他应用方向：
- 更快地生成研究人员所需的数据集
- 研究不同灾难中，完全位置描述的区别
- 研究不同区域对相同灾难，完全位置描述的区别
- 研究灾难外的位置描述