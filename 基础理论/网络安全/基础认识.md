## 1.数字签名的应用
### 1.1 SSL certificates
1.1.1 介绍ssl是什么，与读者现实生活联系起来？
1.1.2 ssl certificate是什么？
1.1.3 数字签名技术是怎样起作用的？

浏览器用域名访问服务器时，存在的安全风险：
DNS服务器中记录了由域名到IP地址的映射。DNS服务器如果被攻陷，那么域名对应的IP地址可能会改成攻击者的服务器IP地址，从而让攻击者能冒充正牌的网站获取用户信息。

这产生了一个问题：那怎样确保我访问的网站不是攻击者假冒的呢？
简单理解版：一个第三方机构在内容是该服务器持有该域名的条子上签了字，并且这个条子放在了服务器上。有人访问通过域名访问该服务器的时候，服务器出示该条子。这个人通过验证该条子上的签字确实是该机构的，从而信任该条子上的内容。
一个第三方机构（CA）在一张证明服务器拥有某个域名的“条子”上签了字，然后将这张“条子”放在服务器上。当有人通过域名访问这个服务器时，服务器会出示这张“条子”。访问者验证这张“条子”上的签字确实来自这个机构后，就可以信任条子上的内容，从而确保访问的是合法的网站。


为了解决这样的安全风险，出现了证书颁发机构(certificate authority,CA)的概念。证书颁发机构是被有公信力的第三方机构，它会向合法持有特定域名的服务器颁发一个证书（简单认为是这样的元组构成(域名，服务器公钥，CA名称，CA的数字签名)），用于证明你所访问的域名不是被攻击的者假冒的，这个证书叫做SSL/TSL certificate。
证书的服务器公钥字段标识了一个特定服务器。(证书的服务器公钥字段，域名)这组映射关系的想说明的是这个服务器合法拥有该域名。CA担保了而这件事。CA机构是大家都认可的受监管的第三方机构，因此我们相信CA的担保，因此我们相信服务器合法拥有该域名。
那接下来只要证明CA机构确实担保了这件事就行了，也也即用户验证SSL/TSL certificate是否确实为CA颁发的。
所以现在，访问一个域名的过程就会这样的：
- 用户在浏览器中输入一个域名。DNS服务器返回这个域名的服务器IP地址。
- 根据服务器IP地址访问服务器，服务器向出示拥有该域名的SSL/TSL certificate
- 用户验证SSL/TSL certificate是否确实为CA颁发的。若是，则可以认为此网址为真。

验证SSL/TSL certificate是否确实为CA颁发的具体过程是怎样的？
第一个认识：SSL/TSL certificate核心组成结构
- 域名
- 被授予证书的服务器的公钥
- 授予改证书的机构名称
第二个认识：CA给SSL/TSL certificate签名
- 对SSL/TSL certificate中的内容进行hash，得到一个由一串数字组成的fingerprint。根据hash函数的特性，任何对证书内容的修改，都会导致fingerprint改变。也就是说SSL/TSL certificate中的内容与fingerprint是等价的，后者的优势是简短。
- 对fingerprint用CA的私钥进行加密得到Certificate。
- 把Certificate附在一种SSL/TSL certificate的后面 (注意这里只需要附上Certificate，不需要fingerprint)
具体验证步骤：
- 客户端根据SSL/TSL certificate中授予改证书的机构名称字段，在浏览器等地方查询该机构的公钥
- 执行 if hash(SSL/TSL certificate) == decrypt(certificate, CA 公钥CA公钥(CA名称))，如果为True则验证通过。
- 如果为FALSE，有两种情况：
	- 从`==`左边看：可能是hash值与fingerprint不同了，表明证书被篡改，因此此服务器无法被信任
	- 从`==`右边看：更可能是该机构没有用私钥对fingerprint加密过。也即，机构没有对该证书签名。

证书是否伪造的可能性？
不可能。
我对伪造进行一个定义：对于攻击者来讲，他的目的是制作一个SSL/TSL certificate，其中的公钥字段为自己服务器的公钥，且让`if hash(SSL/TSL certificate) == decrypt(certificate, CA公钥(CA名称))` 判断结果为True。
用反正法，证明不可能：
 设`hash(SSL/TSL certificate) == decrypt(certificate, CA公钥(CA名称))`为True
 设hash(SSL/TSL certificate) == fingerprint，则decrypt(certificate, CA公钥(CA名称)) == fingerprint 等价于 certificate == encrypt(fingerprint, CA私钥), 由于正确的certifacate给出了，则CA私钥已知。这与CA私钥只有CA机构持有，为未知的相矛盾。因此无法伪造证书。




攻击者把公钥改成自己服务器的公钥会导致左边的返回值改变。那么

这里的不可能包含以下的含义，用执行 ，这个判断来理解：




不同于，在网络上，所有的信息本质上都是一串字符。

客户端获取服务器端持有的ssl/tls certificate。


帮我写一封1200字的道歉信。情况是这样的：我是福州大学的研究生，她是福州大学至诚学院的大四本科生（学校在市区，是独立学院），目前正在考研，距离考研没有多少天了，她现在在考研，我们现在每周见一次。昨天，我没有跟我对象


帮我写一封1200字的道歉信。背景情况是这样的：我是福州大学的研究生，她是福州大学至诚学院的大四本科生（学校在市区，是独立学院），目前正在考研，距离考研没有多少天了，她现在在考研，我们现在每周见一次。昨天，我没有选择坐地铁，而是选择开电动自行车去市区和她见面，这样做，对我来讲不会有长时间地铁的不适，减少了通行费用骑电动车兜风，但更重要的是对我对象来讲，能够带她兜风，放松心情。 问题是这样的：在吃完饭从东街口回福大至诚的行驶过程中，遇到一个路口，在这个路口等红绿灯，绿灯时，我对象提出一个指令，我理解成的是左转，于是我开始左转（这是双向四车道，我在车道旁边的非机动车道上）。我是这样子做的，在我先变道到直行车道，因为起步快，我在直行车队的最前面（我认为这是安全的，因为头车注意到了我），然后一边往前一边往左转车道上变道（这有一定的安全风险，但是左转车有个1/4圆形的变道区域，我会在这个区域外实现左转，所以我认为这也是安全的）。我对象没有骑车经验，但是觉着我这样做非常危险：我不应该占用机动车道，而是应该走人行道，走两段斑马线实现左转。我不遵守交通规则。这样可能会被撞。于是我赶紧变道回非机动车道，直行，没选择左转。于是她非常激动，一直捶我，骂我，说危险，不再坐我车啥的。我一开始忍了，但是后边一直这样超过5分钟，我最后也怒了。因为我觉得她这是外行指导内行，我在赣州开电动车的经验是可以在红绿灯路口在机动车道上实现左边的。她的打骂也让我有情绪。而且路上这样会非常危险。 于是我就吼她。而且，同她在一个路口理论对错——能不能在非机动车能否在机动车道上左转。我尝试自己解释，她总是打岔，然后我实在没忍住破口‘你像个猪一样’（核心矛盾产生了）。然后，听完我的解释，她不信，我找了一个陌生的叔叔，他说得走斑马线实现左转，把非机动车带入行人的角色（我驾驶错了）。道歉的角度:她打骂我是为了让我安全行驶。我不该吼她，更不该骂她。我的骂是一个语气词，表达是你不听我解释的无奈，和宣泄被大骂的愤怒情绪。我不应该犯唯心主义的错误，用以往的经验套用到福州，而是应该实事求是。但是也要告诉让驾驶员舒心而不是打骂驾驶员，也是安全行驶的要求。然后我骑电动车带她散心的良好目的。


ssl/tls certificate 是一个服务器对网站的持有证明。需要通过CA机构获取。客户用https协议访问域名网站时，先要验证持有证明。

![[Pasted image 20251103123248.png]]
ssl是怎么确保数据完整性的？
